# 開発ワークフローについて

GitLabでMerge Requestを行うには、2つの方法が用意されている。

1. 保護ブランチワークフロー  
開発メンバーが同じGitLabプロジェクトを開発する方法。
2. フォークワークフロー  
Masterブランチへのマージは限られたメンバーだけが行い、開発メンバーはフォークして開発を行う方法。

## 保護ブランチワークフロー

- 開発メンバー全員が1つのGitLabプロジェクトを利用する。
  - プロジェクトごとにリモートリポジトリひとつだけを管理すれば良いため、開発手順やリポジトリ構造が複雑化せずにすむ。
  - 社内のチーム開発など開発者が特定できる環境でよく利用される。
- Masterブランチを保護対象として取り扱い、レビュー権限を持った管理者だけに更新作業の制限をかける。
- 開発者はDeveloplerアクセス権限だけが付与され、機能ブランチをプロジェクトにプッシュした後、Masterブランチに対してMerge Requestを作成する。

1. ブランチの保護  
プロジェクトの管理者は、Masterブランチに対してProtected設定を行う。
2. 機能ブランチの作成  
ローカルリポジトリに複製を行い、機能ブランチを作成する。
3. リモートリポジトリの更新  
作成した機能ブランチ上で開発を行い、リモートリポジトリにプッシュする。
4. Merge Requestの作成  
リモートリポジトリの機能ブランチをMasterブランチにマージしてもらうためにMerge Requestを作成する。
5. Merge Requestの確認とマージ  
Merge Requestの内容をレビューアーが確認し、問題がなければMasterブランチにマージする。

## フォークワークフロー

- 管理者やレビューアーのみがリポジトリを操作できるようになっている。
- 開発者はフォーク機能を利用することによって、別のリポジトリで開発を行う。
  - 通常開発者には、プロジェクトReporterアクセス権限だけが付与されており、フォークした自身のリポジトリ上で開発を行う。
  - Masterブランチに変更を加えたい場合は、フォークに対してマージリクエストを要求する。
- 開発者に必要なアクセス制限が自動的に付与されるため、追加での作業は不要。
- 開発者側でフォークのリポジトリを最新に保つ必要があり、複数のリモートリポジトリを管理するという支店でより高度なGitスキルが必要になる。社内の開発フローでは管理が複雑化するためオススメしない
- オープンソースなどネット上で公開されているアプリケーション開発では、不特定多数の開発者に対してリポジトリの書き込み権限を与えないよう管理する方法。

1. Masterブランチの作成  
プロジェクトの管理者は、開発者に対してReporterアクセス権限を付与します。
2. リポジトリをフォーク  
GitLab上でリポジトリをフォークします。
3. ローカルリポジトリに複製（clone）  
リモートリポジトリをローカルリポジトリに複製する。
4. リモートリポジトリにプッシュ  
機能ブランチを作成して開発を行い、最後にフォークしたリポジトリに対してプッシュする。
5. Merge Requestの作成  
フォークしたリポジトリをMasterブランチにマージしてもらうためにMerge Requestを作成する。
6. Merge Requestの確認とマージ  
Merge Requestの内容をレビューアーが確認し、問題がなければMasterブランチにマージする。
